<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <script src="/js/event.js"></script> 
    <link rel="stylesheet" href="/css/event.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <title>MJ Admin</title>
  </head>
  <body>
    <!-- include header include -->
    {% include "inc_header" %}

    <!-- include sidebar include -->
    {% include "inc_sidebar" %}

    {% if flash %}
    <h1> {{ flash }} </h1>
    {% endif %}

    <div id="root">
      <form method="post" action="/events/{{ event.id }}">
        <h1> Event: </h1>
        <div class="event-box">
          <h3> Event ID: {{ event.id }}</h3>
          <h5> Sport Type: <input id="event_sport" type="text" name="sport" value="{{ event.sport }}"> </h5>
          <h5> Title: <input id="event_title" type="text" name="title" value="{{ event.title }}"> </h5>
          <h5> Country: <input id="event_country" type="text" name="country" value="{{ event.country }}"> </h5>
          <h5> Location: <input id="event_location" type="text" name="location" value="{{ event.location }}"> </h5>
          <h5> Track: <input id="event_track" type="text" name="track" value="{{ event.track }}"> </h5>
        </div>
        <input type="submit" value="Update Event" class="update-event-button">
      </form>

      <form method="post" action="/events/{{ event.id }}/update_sessions">
        <table class="sessions-table">
          <tr>
            <th> ID </th>
            <th> Name </th>
            <th> Time </th>
            <th> Delete </th>
          </tr>
          {% for session in event.sessions %}
          <tr>
            <td> {{ session.id }} </td>
            <td style="display: none;"> <input type="text" name="id_{{ loop.index0 }}" value="{{ session.id }}"/> </td>
            <td> <input type="text" name="name_{{ loop.index0 }}" value="{{ session.name }}"/> </td>
            <td> <input type="text" name="time_{{ loop.index0 }}" value="{{ session.time }}"/> </td>
            <td> <a href="/delete/events/{{ event.id }}/sessions/{{ session.id }}">âœ–</a> </td>
          </tr>
          {% endfor %}
        </table>
        <input type="submit" value="Update Sessions">
      </form>

      <form method="post" action="/events/{{ event.id }}/create_session">
        Session Name: <input type="text" name="name"> </br>
        Session Time (in UTC): <input type="text" name="time" value="YYYY-MM-DDTHH:MM:SS"> </br>
        <input type="submit" value="Create new session">
      </form>
    </div>
  </body>
</html>
